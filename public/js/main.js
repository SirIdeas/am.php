// Generated by CoffeeScript 1.9.1
(function() {
  $(function() {
    (function() {
      return $('.spyscroll[data-nav]').each(function() {
        var cls, current, relative, ret, target;
        cls = $(this).data('class');
        target = $($(this).data('nav'));
        relative = $($(this).data('relative')).offset().top;
        current = null;
        ret = $(this).find('a').map(function() {
          var selector;
          selector = $(this).attr('href').replace(/.*(?=#[^\s]+$)/, '');
          return [[$(selector + ':visible').offset().top - $(selector).outerHeight() - relative, this]];
        }).sort(function(a, b) {
          return a[0] - b[0];
        });
        return $(this).bind('spyscroll', function(e, scrollTop) {
          var i, item, len;
          $(current).parents('li').removeClass(cls);
          current = null;
          for (i = 0, len = ret.length; i < len; i++) {
            item = ret[i];
            if (item[0] >= scrollTop) {
              break;
            }
            current = item[1];
          }
          return $(current).parents('li').addClass(cls);
        });
      });
    })();
    $('.spyscroll[data-equal]').bind('spyscroll', function(e, scrollTop) {
      var cls, method, value;
      cls = $(this).data('class');
      value = eval($(this).data('equal'));
      method = scrollTop === value ? 'addClass' : 'removeClass';
      return $(this)[method](cls);
    });
    $('.spyscroll[data-not-equal]').bind('spyscroll', function(e, scrollTop) {
      var cls, method, value;
      cls = $(this).data('class');
      value = eval($(this).data('not-equal'));
      method = scrollTop !== value ? 'addClass' : 'removeClass';
      return $(this)[method](cls);
    });
    $('.spyscroll[data-height]').bind('spyscroll', function(e, scrollTop) {
      var cls, height, method, target;
      cls = $(this).data('class');
      target = $($(this).data('height'));
      height = target.outerHeight();
      if (target.length > 0) {
        method = scrollTop >= height ? 'addClass' : 'removeClass';
        return $(this)[method](cls);
      }
    });
    $(document).scroll(function() {
      return $('.spyscroll').trigger('spyscroll', $(this).scrollTop());
    });
    return $(document).trigger('scroll');
  });

}).call(this);
